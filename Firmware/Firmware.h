/*!
 @header Firmware.h
 @project Pusher
 @author Alexander Maksimenko
 @copyright Copyright (c) 2009 Ripdev. All rights reserved.
 */

@class FirmwareBundle;

@interface Firmware : NSObject
{
    FirmwareBundle* _bundle;
    NSString* _path;
}

-(id) initWithBundle:(FirmwareBundle*) info path:(NSString*) path;

-(NSString*) bundlePath;

-(NSString*) path;
-(NSString*) name;
-(int) version;
-(Platform) platform;
-(NSString*) filename;
-(NSString*) rootFilesystem;
-(NSString*) rootFilesystemKey;
-(NSString*) rootFilesystemMountVolume;
-(double) rootFilesystemSize;
-(double) rootFilesystemUsedSpace;
-(NSString*) ramdiskMountVolume;

-(NSArray*) preInstalledCustomPackages;
-(NSDictionary*) firmwarePatches;
-(NSDictionary*) filesystemPatches;
-(NSDictionary*) basebandPatches;

-(BOOL) bbUpdateAvailable;
-(BOOL) phoneActivationAvailable;

-(BOOL) unzipTo:(NSString*) path;

-(NSString*) allFlashDir;
-(NSString*) appleLogoFile;
-(NSString*) iBootFile;
-(NSString*) iBSSFile;
-(NSString*) wtfFile;
-(NSString*) restoreRamdiskFile;
-(NSString*) deviceTreeFile;
-(NSString*) kernelCacheFile;

-(BOOL) patchIBoot;
-(BOOL) extractRamdisk:(RamdiskType) type to:(NSString*) file;
-(BOOL) makeRamdisk:(RamdiskType) type from:(NSString*) file encrypt:(BOOL) encrypt;

+(BOOL) checkCustomPicture:(NSString*) file;
-(BOOL) makeBootLogo:(NSString*) file;
-(BOOL) makeRecoveryLogo:(NSString*) file;

-(BOOL) patchFirmwareModule:(NSString*) file ofType:(int) type withPatch:(NSString*) patch key:(NSString*) key iv:(NSString*) iv exploit:(BOOL) exploit;
-(BOOL) applyPatch:(NSString*) patch toFile:(NSString*) file;

@end
