/*!
 @header RamdiskBuilder.h
 @project Pusher
 @author Alexander Maksimenko
 @copyright Copyright (c) 2009 Ripdev. All rights reserved.
 */

#import "WorkerThread.h"
#import "SecureTask.h"

@class Firmware, InstallerPackageManager, InstallerPackageBundle, CustomPackageManager, CustomPackageBundle, CydiaPackageBundle;

@interface RamdiskBuilder : WorkerThread
{
    Firmware* _firmware;
    SecureTask* _secureTask;

    BOOL _abortBuilding;
}

-(BOOL) buildRamdisk;
-(BOOL) patchFirmware;
-(BOOL) copyRamdisk;
-(BOOL) rebuildRamdisk;

-(BOOL) actionPatch:(NSString*) file :(NSString*) patch;
-(BOOL) actionAdd:(NSString*) file :(NSString*) path;
-(BOOL) actionReplaceKernel:(NSString*) file :(NSString*) path;
-(BOOL) actionSetOwner:(NSString*) file :(NSString*) owner;
-(BOOL) actionSetPermission:(NSString*) file :(NSString*) permission;
-(BOOL) actionRunScript:(NSString*) file :(NSString*) path;

-(NSString*) safePath:(NSString*) string;

@end